{"version":3,"sources":["index.js"],"names":["createElement","tag","attrs","children","Jreact","render","vnode","container","node","document","createTextNode","setAttribute","forEach","childVnode","appendChild","key","startsWith","toLocaleLowerCase","Object","assign","style","JreactDom","innerHTML","timer","start","setInterval","Date","toString","pause","querySelector","clearInterval"],"mappings":"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","file":"chapter-1.e31bb0bc.map","sourceRoot":"..","sourcesContent":["/** step 1 */\n/**\n * ## JSX与虚拟DOM\n * 引入\n * 演练地址： https://babeljs.io/repl\n * @babel/plugin-transform-react-jsx 文档： https://babeljs.io/docs/en/babel-plugin-transform-react-jsx\n * \n * 1. 初始化环境 \n *   yarn init -y\n *   yarn add parcel-bundler\n *   touch index.html index.js\n *   touch .bablerc\n * 2. 设置.babelrc\n *   {\n *     \"presets\": [\"env\"],\n *     \"plugins\": [\n *        [\"transform-react-jsx\", {\n *            \"pragma\": \"Jreact.createElement\"\n *        }]\n *      ]\n *   }\n *  3. 执行\n *    npx parcel index.html\n */\n\n /*\nfunction createElement(tag, attrs, ...children) {\n  return {\n    tag, \n    attrs, \n    children\n  }\n}\n\nconst Jreact = {\n  createElement\n}\n\nlet element = <div className=\"wrap\">Hello <span className=\"name\">Jirengu</span></div>\n\nconsole.log(element)\n*/\n\n\n\n/** step 2 */\n/**\n * 渲染虚拟DOM\n */\n\n/*\nfunction createElement(tag, attrs, ...children) {\n  return {\n    tag, \n    attrs, \n    children\n  }\n}\n\nconst Jreact = {\n  createElement\n}\n\n\nfunction render(vnode, container) {\n  \n  let node\n  if(typeof vnode === 'string') {\n    node = document.createTextNode(vnode)\n  }\n\n  if(typeof vnode === 'object') {\n    node = document.createElement(vnode.tag)\n    setAttribute(node, vnode.attrs)\n    vnode.children.forEach(childVnode => render(childVnode, node))\n  }\n\n  container.appendChild(node)\n\n  \n}\n\nfunction setAttribute(node, attrs) {\n  if(!attrs) return\n\n  for(let key in attrs) {\n    if(key.startsWith('on')) {\n      node[key.toLocaleLowerCase()] = attrs[key]\n    } else if(key === 'style') {\n      Object.assign(node.style, attrs[key])\n    } else {\n      node[key] = attrs[key]\n    }\n  }\n}\n\nconst JreactDom = {\n  render\n}\n\n\nlet name = 'jirengu'\nlet showName = () => console.log(`name is: ${name}`)\nlet styleObject = {\n  color: \"red\",\n  fontSize: \"60px\"\n}\n\nlet jsx = (\n  <div id=\"wrap\" data-id=\"1\" onClick={ showName } style={ styleObject }>\n    Hello \n    <span className=\"name\">hello { name } <i></i></span>\n  </div>\n)\n\nJreactDom.render(jsx, document.querySelector('#app'))\n*/\n\n\n\n/**step 3 */\n/**\n * 做一个时钟\n */\n\nfunction createElement(tag, attrs, ...children) {\n  return {\n    tag, \n    attrs, \n    children\n  }\n}\n\nconst Jreact = {\n  createElement\n}\n\n\nfunction render(vnode, container) {\n  let node\n  if(typeof vnode === 'string') {\n    node = document.createTextNode(vnode)\n  }\n\n  if(typeof vnode === 'object') {\n    node = document.createElement(vnode.tag)\n    setAttribute(node, vnode.attrs)\n    vnode.children.forEach(childVnode => render(childVnode, node))\n  }\n\n  container.appendChild(node)\n\n  \n}\n\nfunction setAttribute(node, attrs) {\n  if(!attrs) return\n\n  for(let key in attrs) {\n    if(key.startsWith('on')) {\n      node[key.toLocaleLowerCase()] = attrs[key]\n    } else if(key === 'style') {\n      Object.assign(node.style, attrs[key])\n    } else {\n      node[key] = attrs[key]\n    }\n  }\n}\n\nconst JreactDom = {\n  render(vnode, container) {\n    container.innerHTML = ''\n    render(vnode, container)\n  }\n}\n\n\n\nlet timer = null\n\nstart()\n\n\nfunction start() {\n  timer = setInterval(() => {\n    JreactDom.render((\n      <div id=\"clock\">\n        <div className=\"time\">{ new Date().toString() }</div>\n        <div>\n          <button onClick={ start }>start</button>\n          <button onClick={ pause }>pause</button>\n        </div>\n      </div>\n    )\n    , document.querySelector('#app'))\n  }, 1000)\n}\n\nfunction pause() {\n  clearInterval(timer)\n}\n\n\n\n"]}